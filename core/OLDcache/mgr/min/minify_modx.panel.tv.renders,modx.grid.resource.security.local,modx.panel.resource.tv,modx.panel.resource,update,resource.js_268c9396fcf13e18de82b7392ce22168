MODx.panel.ImageTV=function(config){config=config||{};config.filemanager_url=MODx.config.filemanager_url;Ext.applyIf(config,{layout:'form',autoHeight:true,border:false,hideLabels:true,defaults:{autoHeight:true,border:false},items:[{xtype:'hidden',name:'tv'+config.tv,id:'tv'+config.tv,value:config.value},{xtype:'modx-combo-browser',browserEl:'tvbrowser'+config.tv,name:'tvbrowser'+config.tv,id:'tvbrowser'+config.tv,triggerClass:'x-form-image-trigger',value:config.relativeValue,hideFiles:true,source:config.source||1,allowedFileTypes:config.allowedFileTypes||'',openTo:config.openTo||'',hideSourceCombo:true,listeners:{'select':{fn:function(data){Ext.getCmp('tv'+this.config.tv).setValue(data.relativeUrl);Ext.getCmp('tvbrowser'+this.config.tv).setValue(data.relativeUrl);this.fireEvent('select',data);},scope:this},'change':{fn:function(cb,nv){Ext.getCmp('tv'+this.config.tv).setValue(nv);this.fireEvent('select',{relativeUrl:nv,url:nv});},scope:this}}}]});MODx.panel.ImageTV.superclass.constructor.call(this,config);this.addEvents({select:true});};Ext.extend(MODx.panel.ImageTV,MODx.Panel);Ext.reg('modx-panel-tv-image',MODx.panel.ImageTV);MODx.panel.FileTV=function(config){config=config||{};config.filemanager_url=MODx.config.filemanager_url;Ext.applyIf(config,{layout:'form',autoHeight:true,border:false,hideLabels:true,defaults:{autoHeight:true,border:false},items:[{xtype:'hidden',name:'tv'+config.tv,id:'tv'+config.tv,value:config.value},{xtype:'modx-combo-browser',browserEl:'tvbrowser'+config.tv,name:'tvbrowser'+config.tv,id:'tvbrowser'+config.tv,value:config.relativeValue,hideFiles:true,source:config.source||1,allowedFileTypes:config.allowedFileTypes||'',wctx:config.wctx||'web',openTo:config.openTo||'',hideSourceCombo:true,listeners:{'select':{fn:function(data){Ext.getCmp('tv'+this.config.tv).setValue(data.relativeUrl);Ext.getCmp('tvbrowser'+this.config.tv).setValue(data.relativeUrl);this.fireEvent('select',data);},scope:this},'change':{fn:function(cb,nv){Ext.getCmp('tv'+this.config.tv).setValue(nv);this.fireEvent('select',{relativeUrl:nv,url:nv});},scope:this}}}]});MODx.panel.FileTV.superclass.constructor.call(this,config);this.addEvents({select:true});};Ext.extend(MODx.panel.FileTV,MODx.Panel);Ext.reg('modx-panel-tv-file',MODx.panel.FileTV);MODx.checkTV=function(id){var cb=Ext.get('tv'+id);Ext.get('tvh'+id).dom.value=cb.dom.checked?cb.dom.value:'';};;MODx.grid.ResourceSecurity=function(config){config=config||{};var ac=new Ext.ux.grid.CheckColumn({header:_('access'),dataIndex:'access',width:40,sortable:false,hidden:MODx.perm.resourcegroup_resource_edit!=1});Ext.applyIf(config,{id:'modx-grid-resource-security',fields:['id','name','access'],paging:false,remoteSort:false,autoHeight:true,plugins:ac,columns:[{header:_('name'),dataIndex:'name',width:200,sortable:true},ac]});MODx.grid.ResourceSecurity.superclass.constructor.call(this,config);this.propRecord=Ext.data.Record.create(config.fields);this.on('rowclick',MODx.fireResourceFormChange);};Ext.extend(MODx.grid.ResourceSecurity,MODx.grid.LocalGrid);Ext.reg('modx-grid-resource-security',MODx.grid.ResourceSecurity);;MODx.panel.ResourceTV=function(config){config=config||{};Ext.applyIf(config,{id:'modx-panel-resource-tv',title:_('template_variables'),class_key:'',resource:'',cls:MODx.config.tvs_below_content==1?'x-panel-body tvs-wrapper below-content':'tvs-wrapper x-panel-body',autoHeight:true,applyTo:'modx-resource-tvs-div',header:false,templateField:'modx-resource-template'});MODx.panel.ResourceTV.superclass.constructor.call(this,config);this.addEvents({load:true});};Ext.extend(MODx.panel.ResourceTV,MODx.Panel,{autoload:function(){return false;},refreshTVs:function(){return false;var t=Ext.getCmp(this.config.templateField);if(!t&&!this.config.template){return false;}
var template=this.config.template?this.config.template:t.getValue();this.getUpdater().update({url:MODx.config.manager_url+'?a=resource/tvs',method:'GET',params:{'class_key':this.config.class_key,'template':template,'resource':this.config.resource},scripts:true,callback:function(){this.fireEvent('load');if(MODx.afterTVLoad){MODx.afterTVLoad();}},scope:this});}});Ext.reg('modx-panel-resource-tv',MODx.panel.ResourceTV);;MODx.panel.Resource=function(config){config=config||{record:{}};config.record=config.record||{};Ext.applyIf(config,{url:MODx.config.connector_url,baseParams:{},id:'modx-panel-resource',class_key:'modDocument',resource:'',bodyStyle:'',cls:'container form-with-labels',defaults:{collapsible:false,autoHeight:true},forceLayout:true,items:this.getFields(config),fileUpload:true,useLoadingMask:true,listeners:{'setup':{fn:this.setup,scope:this},'success':{fn:this.success,scope:this},'failure':{fn:this.failure,scope:this},'beforeSubmit':{fn:this.beforeSubmit,scope:this},'fieldChange':{fn:this.onFieldChange,scope:this}}});MODx.panel.Resource.superclass.constructor.call(this,config);var ta=Ext.get('ta');if(ta){ta.on('keydown',this.fieldChangeEvent,this);}
this.on('ready',this.onReady,this);var urio=Ext.getCmp('modx-resource-uri-override');if(urio){urio.on('check',this.freezeUri);}
this.addEvents('tv-reset');};Ext.extend(MODx.panel.Resource,MODx.FormPanel,{initialized:false,defaultClassKey:'modDocument',classLexiconKey:'document',rteElements:'ta',rteLoaded:false,warnUnsavedChanges:false,setup:function(){if(!this.initialized){this.getForm().setValues(this.config.record);var pcmb=this.getForm().findField('parent-cmb');if(pcmb&&Ext.isEmpty(this.config.record.parent_pagetitle)){pcmb.setValue('');}else if(pcmb){pcmb.setValue(this.config.record.parent_pagetitle+' ('+this.config.record.parent+')');}
if(!Ext.isEmpty(this.config.record.pagetitle)){Ext.getCmp('modx-resource-header').getEl().update('<h2>'+Ext.util.Format.stripTags(this.config.record.pagetitle)+'</h2>');}
if(!Ext.isEmpty(this.config.record.resourceGroups)){var g=Ext.getCmp('modx-grid-resource-security');if(g&&Ext.isEmpty(g.config.url)){var s=g.getStore();if(s){s.loadData(this.config.record.resourceGroups);}}}
this.defaultClassKey=this.config.record.class_key||this.defaultClassKey;this.defaultValues=this.config.record||{};if((this.config.record&&this.config.record.richtext)||MODx.request.reload||MODx.request.activeSave==1){this.markDirty();}
if(MODx.config.confirm_navigation==1){var panel=this;window.onbeforeunload=function(){if(panel.warnUnsavedChanges)return _('unsaved_changes');};}
if(this.config.record.deleted){this.handlePreview('hide');}}
if(MODx.config.use_editor&&MODx.loadRTE){var f=this.getForm().findField('richtext');if(f&&f.getValue()==1&&!this.rteLoaded){MODx.loadRTE(this.rteElements);this.rteLoaded=true;}else if(f&&f.getValue()==0&&this.rteLoaded){if(MODx.unloadRTE){MODx.unloadRTE(this.rteElements);}
this.rteLoaded=false;}}
this.fireEvent('ready');this.initialized=true;MODx.fireEvent('ready');MODx.sleep(4);if(MODx.afterTVLoad){MODx.afterTVLoad();}
this.fireEvent('load');},handlePreview:function(action){var previewBtn=Ext.getCmp('modx-abtn-preview');if(previewBtn==undefined){Ext.defer(function(){this.handlePreview(action);},200,this);}else{var toolBar=Ext.getCmp('modx-page-update-resource').ab,btnIndex=toolBar.items.indexOf(previewBtn);previewBtn[action]();toolBar.items.get(btnIndex+1)[action]();}},beforeDestroy:function(){if(this.rteLoaded&&MODx.unloadRTE){MODx.unloadRTE(this.rteElements);this.rteLoaded=false;}
MODx.panel.Resource.superclass.beforeDestroy.call(this);},beforeSubmit:function(o){var ta=Ext.get('ta');if(ta){var v=ta.dom.value;var hc=Ext.getCmp('hiddenContent');if(hc){hc.setValue(v);}}
var g=Ext.getCmp('modx-grid-resource-security');if(g){Ext.apply(o.form.baseParams,{resource_groups:g.encode()});}
if(ta){this.cleanupEditor();}
if(this.getForm().baseParams.action=='resource/create'){var btn=Ext.getCmp('modx-abtn-save');if(btn){btn.disable();}}
return this.fireEvent('save',{values:this.getForm().getValues(),stay:Ext.state.Manager.get('modx.stay.'+MODx.request.a,'stay')});},success:function(o){this.warnUnsavedChanges=false;var g=Ext.getCmp('modx-grid-resource-security');if(g){g.getStore().commitChanges();}
var t=Ext.getCmp('modx-resource-tree');if(t){var ctx=Ext.getCmp('modx-resource-context-key').getValue();var pa=Ext.getCmp('modx-resource-parent-hidden').getValue();var pao=Ext.getCmp('modx-resource-parent-old-hidden').getValue();var v=ctx+'_'+pa;var n=t.getNodeById(v);if(pa!==pao){t.refresh();Ext.getCmp('modx-resource-parent-old-hidden').setValue(pa);}else{if(typeof n!=="undefined"){n.leaf=false;}
t.refreshNode(v,true);}}
var object=o.result.object;if(this.config.resource&&object.parent!==undefined&&(object.class_key!=this.defaultClassKey||object.parent!=this.defaultValues.parent)){location.href=location.href;}else{if(object.deleted!==this.record.deleted){if(object.deleted){var action='hide';}else{action='show';}
this.handlePreview(action);}
this.record=object;this.getForm().setValues(object);Ext.getCmp('modx-page-update-resource').config.preview_url=object.preview_url;}},failure:function(o){this.warnUnsavedChanges=true;if(this.getForm().baseParams.action=='resource/create'){var btn=Ext.getCmp('modx-abtn-save');if(btn){btn.enable();}}},freezeUri:function(cb){var uri=Ext.getCmp('modx-resource-uri');if(!uri){return false;}
if(cb.checked){uri.show();}else{uri.hide();}},templateWarning:function(){var t=Ext.getCmp('modx-resource-template');if(!t){return false;}
if(t.getValue()!==t.originalValue){Ext.Msg.confirm(_('warning'),_('resource_change_template_confirm'),function(e){if(e=='yes'){var nt=t.getValue();var f=Ext.getCmp('modx-page-update-resource');f.config.action='resource/reload';this.warnUnsavedChanges=false;MODx.activePage.submitForm({success:{fn:function(r){MODx.loadPage(r.result.object.action,'id='+r.result.object.id+'&reload='+r.result.object.reload+'&class_key='+r.result.object.class_key);},scope:this}},{bypassValidCheck:true},{reloadOnly:true});}else{t.setValue(this.config.record.template);}},this);}},onFieldChange:function(o){if(o&&o.field&&o.field.name=='syncsite')return;if(this.isReady||MODx.request.reload){this.warnUnsavedChanges=true;}},cleanupEditor:function(){if(MODx.onSaveEditor){var fld=Ext.getCmp('ta');if(fld){MODx.onSaveEditor(fld);}}},getFields:function(config){var it=[];it.push({title:_(this.classLexiconKey),id:'modx-resource-settings',cls:'modx-resource-tab',layout:'form',labelAlign:'top',labelSeparator:'',bodyCssClass:'tab-panel-wrapper main-wrapper',autoHeight:true,defaults:{border:false,msgTarget:'under',width:400},items:this.getMainFields(config)});it.push({id:'modx-page-settings',title:_('settings'),cls:'modx-resource-tab',layout:'form',forceLayout:true,deferredRender:false,labelWidth:200,bodyCssClass:'main-wrapper',autoHeight:true,defaults:{border:false,msgTarget:'under'},items:this.getSettingFields(config)});if(config.show_tvs&&MODx.config.tvs_below_content!=1){it.push(this.getTemplateVariablesPanel(config));}
if(MODx.perm.resourcegroup_resource_list==1){it.push(this.getAccessPermissionsTab(config));}
var its=[];its.push(this.getPageHeader(config),{id:'modx-resource-tabs',xtype:'modx-tabs',forceLayout:true,deferredRender:false,collapsible:true,animCollapse:false,itemId:'tabs',items:it});var ct=this.getContentField(config);if(ct){its.push({title:_('resource_content'),id:'modx-resource-content',layout:'form',bodyCssClass:'main-wrapper',autoHeight:true,collapsible:true,animCollapse:false,hideMode:'offsets',items:ct});}
if(MODx.config.tvs_below_content==1){var tvs=this.getTemplateVariablesPanel(config);its.push(tvs);}
return its;},getPageHeader:function(config){config=config||{record:{}};return{html:'<h2>'+_('document_new')+'</h2>',id:'modx-resource-header',cls:'modx-page-header',border:false,forceLayout:true,anchor:'100%'};},getTemplateVariablesPanel:function(config){return{xtype:'modx-panel-resource-tv',collapsed:false,resource:config.resource,class_key:config.record.class_key||'modDocument',template:config.record.template,anchor:'100%',border:true,style:'visibility: visible'};},getMainFields:function(config){config=config||{record:{}};return[{layout:'column',border:false,anchor:'100%',id:'modx-resource-main-columns',defaults:{labelSeparator:'',labelAlign:'top',border:false,msgTarget:'under'},items:[{columnWidth:.67,layout:'form',id:'modx-resource-main-left',defaults:{msgTarget:'under'},items:this.getMainLeftFields(config)},{columnWidth:.33,layout:'form',labelWidth:0,border:false,id:'modx-resource-main-right',style:'margin-right: 0',defaults:{msgTarget:'under'},items:this.getMainRightFields(config)}]},{html:MODx.onDocFormRender,border:false},{xtype:'hidden',fieldLabel:_('id'),hideLabel:true,description:'<b>[[*id]]</b><br />',name:'id',id:'modx-resource-id',anchor:'100%',value:config.resource||config.record.id,submitValue:true},{xtype:'hidden',name:'type',value:'document'},{xtype:'hidden',name:'context_key',id:'modx-resource-context-key',value:config.record.context_key||'web'},{xtype:'hidden',name:'content',id:'hiddenContent',value:(config.record.content||config.record.ta)||''},{xtype:'hidden',name:'create-resource-token',id:'modx-create-resource-token',value:config.record.create_resource_token||''},{xtype:'hidden',name:'reloaded',value:!Ext.isEmpty(MODx.request.reload)?1:0},{xtype:'hidden',name:'parent',value:config.record.parent||0,id:'modx-resource-parent-hidden'},{xtype:'hidden',name:'parent-original',value:config.record.parent||0,id:'modx-resource-parent-old-hidden'}];},getMainLeftFields:function(config){config=config||{record:{}};return[{xtype:'textfield',fieldLabel:_('resource_pagetitle')+'<span class="required">*</span>',description:'<b>[[*pagetitle]]</b><br />'+_('resource_pagetitle_help'),name:'pagetitle',id:'modx-resource-pagetitle',maxLength:255,anchor:'100%',allowBlank:false,enableKeyEvents:true,listeners:{'keyup':{scope:this,fn:function(f,e){var titlePrefix=MODx.request.a=='resource/create'?_('new_document'):_('document');var title=Ext.util.Format.stripTags(f.getValue());Ext.getCmp('modx-resource-header').getEl().update('<h2>'+title+'</h2>');}}}},{xtype:'textfield',fieldLabel:_('resource_longtitle'),description:'<b>[[*longtitle]]</b><br />'+_('resource_longtitle_help'),name:'longtitle',id:'modx-resource-longtitle',maxLength:255,anchor:'100%',value:config.record.longtitle||''},{xtype:'textarea',fieldLabel:_('resource_description'),description:'<b>[[*description]]</b><br />'+_('resource_description_help'),name:'description',id:'modx-resource-description',maxLength:255,anchor:'100%',value:config.record.description||''},{xtype:'textarea',fieldLabel:_('resource_summary'),description:'<b>[[*introtext]]</b><br />'+_('resource_summary_help'),name:'introtext',id:'modx-resource-introtext',grow:true,anchor:'100%',value:config.record.introtext||''}];},getMainRightFields:function(config){config=config||{};var aliasLength=~~MODx.config['friendly_alias_max_length']||0;return[{xtype:'modx-combo-template',fieldLabel:_('resource_template'),description:'<b>[[*template]]</b><br />'+_('resource_template_help'),name:'template',id:'modx-resource-template',anchor:'100%',editable:false,baseParams:{action:'element/template/getList',combo:'1',limit:0},listeners:{'select':{fn:this.templateWarning,scope:this}}},{xtype:'textfield',fieldLabel:_('resource_alias'),description:'<b>[[*alias]]</b><br />'+_('resource_alias_help'),name:'alias',id:'modx-resource-alias',maxLength:(aliasLength>255||aliasLength===0)?255:aliasLength,anchor:'100%',value:config.record.alias||''},{xtype:'textfield',fieldLabel:_('resource_menutitle'),description:'<b>[[*menutitle]]</b><br />'+_('resource_menutitle_help'),name:'menutitle',id:'modx-resource-menutitle',maxLength:255,anchor:'100%',value:config.record.menutitle||''},{xtype:'textfield',fieldLabel:_('resource_link_attributes'),description:'<b>[[*link_attributes]]</b><br />'+_('resource_link_attributes_help'),name:'link_attributes',id:'modx-resource-link-attributes',maxLength:255,anchor:'100%',value:config.record.link_attributes||''},{xtype:'xcheckbox',boxLabel:_('resource_hide_from_menus'),hideLabel:true,description:'<b>[[*hidemenu]]</b><br />'+_('resource_hide_from_menus_help'),name:'hidemenu',id:'modx-resource-hidemenu',inputValue:1,checked:parseInt(config.record.hidemenu)||false},{xtype:'xcheckbox',boxLabel:_('resource_published'),hideLabel:true,description:'<b>[[*published]]</b><br />'+_('resource_published_help'),name:'published',id:'modx-resource-published',inputValue:1,checked:parseInt(config.record.published)}]},getSettingFields:function(config){config=config||{record:{}};var s=[{layout:'column',border:false,anchor:'100%',defaults:{labelSeparator:'',labelAlign:'top',border:false,layout:'form',msgTarget:'under'},items:[{columnWidth:.5,id:'modx-page-settings-left',defaults:{msgTarget:'under'},items:this.getSettingLeftFields(config)},{columnWidth:.5,id:'modx-page-settings-right',defaults:{msgTarget:'under'},items:this.getSettingRightFields(config)}]}];return s;},getSettingLeftFields:function(config){return[{xtype:'modx-field-parent-change',fieldLabel:_('resource_parent'),description:'<b>[[*parent]]</b><br />'+_('resource_parent_help'),name:'parent-cmb',id:'modx-resource-parent',value:config.record.parent||0,anchor:'100%'},{xtype:'modx-combo-class-derivatives',fieldLabel:_('resource_type'),description:'<b>[[*class_key]]</b><br />',name:'class_key',hiddenName:'class_key',id:'modx-resource-class-key',allowBlank:false,value:config.record.class_key||'modDocument',anchor:'100%'},{xtype:'modx-combo-content-type',fieldLabel:_('resource_content_type'),description:'<b>[[*content_type]]</b><br />'+_('resource_content_type_help'),name:'content_type',hiddenName:'content_type',id:'modx-resource-content-type',anchor:'100%',value:config.record.content_type||(MODx.config.default_content_type||1)},{xtype:'modx-combo-content-disposition',fieldLabel:_('resource_contentdispo'),description:'<b>[[*content_dispo]]</b><br />'+_('resource_contentdispo_help'),name:'content_dispo',hiddenName:'content_dispo',id:'modx-resource-content-dispo',anchor:'100%',value:config.record.content_dispo||0},{xtype:'numberfield',fieldLabel:_('resource_menuindex'),description:'<b>[[*menuindex]]</b><br />'+_('resource_menuindex_help'),name:'menuindex',id:'modx-resource-menuindex',width:75,value:parseInt(config.record.menuindex)||0}];},getSettingRightFields:function(config){return[{xtype:'xdatetime',fieldLabel:_('resource_publishedon'),description:'<b>[[*publishedon]]</b><br />'+_('resource_publishedon_help'),name:'publishedon',id:'modx-resource-publishedon',allowBlank:true,dateFormat:MODx.config.manager_date_format,timeFormat:MODx.config.manager_time_format,startDay:parseInt(MODx.config.manager_week_start),dateWidth:120,timeWidth:120,offset_time:MODx.config.server_offset_time,value:config.record.publishedon},{xtype:MODx.config.publish_document?'xdatetime':'hidden',fieldLabel:_('resource_publishdate'),description:'<b>[[*pub_date]]</b><br />'+_('resource_publishdate_help'),name:'pub_date',id:'modx-resource-pub-date',allowBlank:true,dateFormat:MODx.config.manager_date_format,timeFormat:MODx.config.manager_time_format,startDay:parseInt(MODx.config.manager_week_start),dateWidth:120,timeWidth:120,offset_time:MODx.config.server_offset_time,value:config.record.pub_date},{xtype:MODx.config.publish_document?'xdatetime':'hidden',fieldLabel:_('resource_unpublishdate'),description:'<b>[[*unpub_date]]</b><br />'+_('resource_unpublishdate_help'),name:'unpub_date',id:'modx-resource-unpub-date',allowBlank:true,dateFormat:MODx.config.manager_date_format,timeFormat:MODx.config.manager_time_format,startDay:parseInt(MODx.config.manager_week_start),dateWidth:120,timeWidth:120,offset_time:MODx.config.server_offset_time,value:config.record.unpub_date},{xtype:'fieldset',items:this.getSettingRightFieldset(config)}];},getSettingRightFieldset:function(config){return[{layout:'column',id:'modx-page-settings-box-columns',border:false,anchor:'100%',defaults:{labelSeparator:'',labelAlign:'top',border:false,layout:'form',msgTarget:'under'},items:[{columnWidth:.5,id:'modx-page-settings-right-box-left',defaults:{msgTarget:'under'},items:this.getSettingRightFieldsetLeft(config)},{columnWidth:.5,id:'modx-page-settings-right-box-right',defaults:{msgTarget:'under'},items:this.getSettingRightFieldsetRight(config)}]},{xtype:'xcheckbox',boxLabel:_('resource_uri_override'),description:_('resource_uri_override_help'),hideLabel:true,name:'uri_override',value:1,checked:parseInt(config.record.uri_override)?true:false,id:'modx-resource-uri-override'},{xtype:'textfield',fieldLabel:_('resource_uri'),description:'<b>[[*uri]]</b><br />'+_('resource_uri_help'),name:'uri',id:'modx-resource-uri',maxLength:255,anchor:'70%',value:config.record.uri||'',hidden:!config.record.uri_override}];},getSettingRightFieldsetLeft:function(config){return[{xtype:'xcheckbox',boxLabel:_('resource_folder'),description:'<b>[[*isfolder]]</b><br />'+_('resource_folder_help'),hideLabel:true,name:'isfolder',id:'modx-resource-isfolder',inputValue:1,checked:parseInt(config.record.isfolder)||0},{xtype:'xcheckbox',boxLabel:_('resource_searchable'),description:'<b>[[*searchable]]</b><br />'+_('resource_searchable_help'),hideLabel:true,name:'searchable',id:'modx-resource-searchable',inputValue:1,checked:parseInt(config.record.searchable)},{xtype:'xcheckbox',boxLabel:_('resource_richtext'),description:'<b>[[*richtext]]</b><br />'+_('resource_richtext_help'),hideLabel:true,name:'richtext',id:'modx-resource-richtext',inputValue:1,checked:parseInt(config.record.richtext)}];},getSettingRightFieldsetRight:function(config){return[{xtype:'xcheckbox',boxLabel:_('resource_cacheable'),description:'<b>[[*cacheable]]</b><br />'+_('resource_cacheable_help'),hideLabel:true,name:'cacheable',id:'modx-resource-cacheable',inputValue:1,checked:parseInt(config.record.cacheable)},{xtype:'xcheckbox',boxLabel:_('resource_syncsite'),description:_('resource_syncsite_help'),hideLabel:true,name:'syncsite',id:'modx-resource-syncsite',inputValue:1,checked:config.record.syncsite!==undefined&&config.record.syncsite!==null?parseInt(config.record.syncsite):true},{xtype:'xcheckbox',boxLabel:_('deleted'),description:'<b>[[*deleted]]</b>',hideLabel:true,name:'deleted',id:'modx-resource-deleted',inputValue:1,checked:parseInt(config.record.deleted)||false}];},getContentField:function(config){return[{id:'modx-content-above',border:false},{xtype:'textarea',name:'ta',id:'ta',hideLabel:true,anchor:'100%',height:400,grow:false,value:(config.record.content||config.record.ta)||''},{id:'modx-content-below',border:false}];},getAccessPermissionsTab:function(config){return{id:'modx-resource-access-permissions',autoHeight:true,title:_('resource_groups'),layout:'form',anchor:'100%',items:[{html:'<p>'+_('resource_access_message')+'</p>',bodyCssClass:'panel-desc',border:false},{xtype:'modx-grid-resource-security',cls:'main-wrapper',preventRender:true,resource:config.resource,mode:config.mode||'update',"parent":config.record["parent"]||0,"token":config.record.create_resource_token,reloaded:!Ext.isEmpty(MODx.request.reload),listeners:{'afteredit':{fn:this.fieldChangeEvent,scope:this}}}]};}});Ext.reg('modx-panel-resource',MODx.panel.Resource);var triggerDirtyField=function(fld){Ext.getCmp('modx-panel-resource').fieldChangeEvent(fld);};MODx.triggerRTEOnChange=function(){triggerDirtyField(Ext.getCmp('ta'));};MODx.fireResourceFormChange=function(f,nv,ov){Ext.getCmp('modx-panel-resource').fireEvent('fieldChange');};;MODx.page.UpdateResource=function(config){config=config||{record:{}};config.record=config.record||{};Ext.apply(config.record,{'parent-cmb':config.record['parent']});Ext.applyIf(config,{url:MODx.config.connector_url,which_editor:'none',formpanel:'modx-panel-resource',id:'modx-page-update-resource',action:'resource/update',components:[{xtype:config.panelXType||'modx-panel-resource',renderTo:config.panelRenderTo||'modx-panel-resource-div',resource:config.resource,record:config.record||{},publish_document:config.publish_document,access_permissions:config.access_permissions,show_tvs:config.show_tvs,mode:config.mode,url:config.url}],buttons:this.getButtons(config)});MODx.page.UpdateResource.superclass.constructor.call(this,config);if(!Ext.isIE){Ext.EventManager.on(window,'beforeunload',function(e){MODx.releaseLock(this.config.resource);MODx.sleep(400);return false;},this);}
new Ext.KeyMap(Ext.getBody(),{key:'p',alt:true,ctrl:true,fn:this.preview,scope:this});};Ext.extend(MODx.page.UpdateResource,MODx.Component,{preview:function(){window.open(this.config.preview_url);return false;},duplicateResource:function(btn,e){MODx.msg.confirm({text:_('resource_duplicate_confirm'),url:MODx.config.connector_url,params:{action:'resource/duplicate',id:this.config.resource},listeners:{success:{fn:function(r){MODx.loadPage('resource/update','id='+r.object.id);},scope:this}}});},deleteResource:function(btn,e){MODx.msg.confirm({text:_('resource_delete_confirm'),url:MODx.config.connector_url,params:{action:'resource/delete',id:this.config.resource},listeners:{success:{fn:function(r){MODx.loadPage('resource/update','id='+r.object.id);},scope:this}}});},cancel:function(btn,e){var fp=Ext.getCmp(this.config.formpanel);if(fp&&fp.isDirty()){Ext.Msg.confirm(_('warning'),_('resource_cancel_dirty_confirm'),function(e){if(e=='yes'){fp.warnUnsavedChanges=false;MODx.releaseLock(MODx.request.id);MODx.sleep(400);MODx.loadPage('?');}},this);}else{MODx.releaseLock(MODx.request.id);MODx.loadPage('?');}},getButtons:function(cfg){var btns=[];if(cfg.canSave==1){btns.push({process:'resource/update',text:_('save'),id:'modx-abtn-save',cls:'primary-button',method:'remote',keys:[{key:MODx.config.keymap_save||'s',ctrl:true}]});}else if(cfg.locked){btns.push({text:cfg.lockedText||_('locked'),id:'modx-abtn-locked',handler:Ext.emptyFn,disabled:true});}
if(cfg.canDuplicate==1&&(cfg.record.parent!==parseInt(MODx.config.tree_root_id)||cfg.canCreateRoot==1)){btns.push({text:_('duplicate'),id:'modx-abtn-duplicate',handler:this.duplicateResource,scope:this});}
if(cfg.canDelete==1&&!cfg.locked){btns.push({text:_('delete'),id:'modx-abtn-delete',handler:this.deleteResource,scope:this});}
btns.push({text:_('view'),id:'modx-abtn-preview',handler:this.preview,scope:this});btns.push({text:_('cancel'),id:'modx-abtn-cancel',handler:this.cancel,scope:this});btns.push({text:_('help_ex'),id:'modx-abtn-help',handler:MODx.loadHelpPane});return btns;}});Ext.reg('modx-page-resource-update',MODx.page.UpdateResource);;function Lingua(config){this.config=config;this.element=[];}
Lingua.prototype.flagDefaultFields=function(){var pagetitle=Ext.getCmp('modx-resource-pagetitle');if(typeof(pagetitle)!=="undefined"&&typeof(pagetitle.label)!=="undefined"){pagetitle.label.update(_('resource_pagetitle')+'<span class="required">*</span>'+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var longtitle=Ext.getCmp('modx-resource-longtitle');if(typeof(longtitle)!=="undefined"&&typeof(longtitle.label)!=="undefined"){longtitle.label.update(_('resource_longtitle')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var description=Ext.getCmp('modx-resource-description');if(typeof(description)!=="undefined"&&typeof(description.label)!=="undefined"){description.label.update(_('resource_description')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var introtext=Ext.getCmp('modx-resource-introtext');if(typeof(introtext)!=="undefined"&&typeof(introtext.label)!=="undefined"){introtext.label.update(_('resource_summary')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var content=Ext.getCmp('modx-resource-content');if(typeof(content)!=="undefined"&&typeof(content.label)!=="undefined"){content.setTitle(_('resource_content')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var alias=Ext.getCmp('modx-resource-alias');if(typeof(alias)!=="undefined"&&typeof(alias.label)!=="undefined"){alias.label.update(_('resource_alias')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var menutitle=Ext.getCmp('modx-resource-menutitle');if(typeof(menutitle)!=="undefined"&&typeof(menutitle.label)!=="undefined"){menutitle.label.update(_('resource_menutitle')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var linkAttributes=Ext.getCmp('modx-resource-link-attributes');if(typeof(linkAttributes)!=="undefined"&&typeof(linkAttributes.label)!=="undefined"){linkAttributes.label.update(_('resource_link_attributes')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var uriOverride=Ext.getCmp('modx-resource-uri-override');if(typeof(uriOverride)!=="undefined"&&typeof(uriOverride.label)!=="undefined"){uriOverride.wrap.child('.x-form-cb-label').update(_('resource_uri_override')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}
var uri=Ext.getCmp('modx-resource-uri');if(typeof(uri)!=="undefined"&&typeof(uri.label)!=="undefined"){uri.label.update(_('resource_uri')+'&nbsp;<img src="../'+this.config.langs[this.config.defaultLang]['flag']+'">');}};Lingua.prototype.flagDefaultTVFields=function(){var _this=this;Ext.each(this.config.tmplvars,function(tv){var captionEl=Ext.get('tv'+tv['id']+'-caption');if(typeof(captionEl)!=='undefined'&&captionEl!==null){captionEl.dom.innerHTML+=' <img src="../'+_this.config.langs[_this.config.defaultLang]['flag']+'">';}});};Lingua.prototype.switchLanguage=function(selectedLang){var els=Ext.query(".lingua-hidden-fields");Ext.each(els,function(item,idx){var cmp,el;if(cmp=Ext.getCmp(item.id)){cmp.getEl().setVisibilityMode(Ext.Element.DISPLAY);cmp.hide();}else if(el=Ext.get(item.id)){el.setVisibilityMode(Ext.Element.DISPLAY);el.hide();}});this.switchMainFields(selectedLang);this.switchTVFields(selectedLang);};Lingua.prototype.createHiddenFields=function(langs){var _this=this;Ext.each(langs,function(item){_this.createHiddenField(item);});};Lingua.prototype.rteToggle=function(lang){var ta=Ext.getCmp('ta');if(ta){var rteToggle=Ext.get('tiny-toggle-rte');var id='ta-'+lang['lang_code'];if(rteToggle){rteToggle.on('click',function(a,b){var cb=Ext.get(b);if(cb.dom.checked){if(typeof(tinyMCE)!=='undefined'){tinyMCE.execCommand('mceAddControl',false,id);}}else{if(typeof(tinyMCE)!=='undefined'){tinyMCE.execCommand('mceRemoveControl',false,id);}}},Ext.getCmp('modx-panel-resource'));}}};Lingua.prototype.createHiddenField=function(lang){var record=this.config.siteContent[lang['lang_code']];var flag=lang['flag'];var pagetitle=Ext.getCmp('modx-resource-pagetitle');if(pagetitle){var hiddenCmp=new Ext.form.TextField({fieldLabel:_('resource_pagetitle')+'<span class="required">*</span>'+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*pagetitle]]</b><br />'+_('resource_pagetitle_help'),name:'pagetitle_lingua['+lang['lang_code']+']',id:'modx-resource-pagetitle-'+lang['lang_code'],cls:'lingua-hidden-fields',maxLength:255,anchor:'100%',allowBlank:true,enableKeyEvents:true,hidden:true,value:(record&&record.pagetitle?record.pagetitle:''),listeners:{'keyup':{scope:this,fn:function(f,e){var titlePrefix=MODx.request.a==MODx.action['resource/create']?_('new_document'):_('document');var title=Ext.util.Format.stripTags(f.getValue());Ext.getCmp('modx-resource-header').getEl().update('<h2>'+title+'</h2>');}}}});Ext.getCmp(pagetitle.ownerCt.id).insert(pagetitle.ownerCt.items.indexOf(pagetitle)+1,hiddenCmp);}
var longtitle=Ext.getCmp('modx-resource-longtitle');if(longtitle){var hiddenCmp=new Ext.form.TextField({fieldLabel:_('resource_longtitle')+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*longtitle]]</b><br />'+_('resource_longtitle_help'),name:'longtitle_lingua['+lang['lang_code']+']',id:'modx-resource-longtitle-'+lang['lang_code'],cls:'lingua-hidden-fields',maxLength:255,anchor:'100%',hidden:true,value:(record&&record.longtitle?record.longtitle:'')});Ext.getCmp(longtitle.ownerCt.id).insert(longtitle.ownerCt.items.indexOf(longtitle)+1,hiddenCmp);}
var description=Ext.getCmp('modx-resource-description');if(description){var hiddenCmp=new Ext.form.TextArea({fieldLabel:_('resource_description')+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*description]]</b><br />'+_('resource_description_help'),name:'description_lingua['+lang['lang_code']+']',id:'modx-resource-description-'+lang['lang_code'],cls:'lingua-hidden-fields',maxLength:255,anchor:'100%',hidden:true,value:(record&&record.description?record.description:'')});Ext.getCmp(description.ownerCt.id).insert(description.ownerCt.items.indexOf(description)+1,hiddenCmp);}
var introtext=Ext.getCmp('modx-resource-introtext');if(introtext){var hiddenCmp=new Ext.form.TextArea({fieldLabel:_('resource_summary')+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*introtext]]</b><br />'+_('resource_summary_help'),name:'introtext_lingua['+lang['lang_code']+']',id:'modx-resource-introtext-'+lang['lang_code'],cls:'lingua-hidden-fields',grow:true,anchor:'100%',hidden:true,value:(record&&record.introtext?record.introtext:'')});Ext.getCmp(introtext.ownerCt.id).insert(introtext.ownerCt.items.indexOf(introtext)+1,hiddenCmp);}
var modxPanelResource=Ext.getCmp('modx-panel-resource');var ta=Ext.getCmp('ta');if(ta){var hiddenCmp=new Ext.form.TextArea({name:'ta_lingua['+lang['lang_code']+']',id:'ta-'+lang['lang_code'],cls:'modx-richtext lingua-hidden-fields',hideLabel:true,anchor:'100%',height:400,grow:false,hidden:true,value:(record&&record.content?record.content:(record&&record.ta?record.ta:''))});Ext.getCmp(ta.ownerCt.id).insert(ta.ownerCt.items.indexOf(ta)+1,hiddenCmp);MODx.triggerRTEOnChange=function(){triggerDirtyField(Ext.getCmp('ta-'+lang['lang_code']));};var _this=this;_this.rteToggle(lang);modxPanelResource.on('load',function(){_this.rteToggle(lang);});var usingRTE=Ext.getCmp('modx-resource-richtext');if(MODx.config.use_editor&&typeof(usingRTE)!=="undefined"&&usingRTE.checked){hiddenCmp.on('afterrender',function(){var f=modxPanelResource.getForm().findField('richtext');modxPanelResource.rteLoaded=false;if(f&&f.getValue()==1&&!modxPanelResource.rteLoaded){if(MODx.loadRTE){MODx.loadRTE(this.getId());}
if(typeof(MODx.ux.CKEditor)!=='undefined'){MODx.ux.CKEditor.replaceComponent(this.getId());}
modxPanelResource.rteLoaded=true;}else if(f&&f.getValue()==0&&modxPanelResource.rteLoaded){if(MODx.unloadRTE){MODx.unloadRTE(this.getId());}
modxPanelResource.rteLoaded=false;}});}}
var content=Ext.getCmp('content');if(content){var hiddenCmp=new Ext.form.Hidden({name:'content_lingua['+lang['lang_code']+']',id:'hiddenContent-'+lang['lang_code'],value:(record&&record.content?record.content:(record&&record.ta?record.ta:''))});Ext.getCmp(content.ownerCt.id).insert(content.ownerCt.items.indexOf(content)+1,hiddenCmp);}
modxPanelResource.on('beforeSubmit',function(o){var ta=Ext.get('ta-'+lang['lang_code']);if(ta){var v=ta.dom.value;var hc=Ext.getCmp('hiddenContent-'+lang['lang_code']);if(hc){hc.setValue(v);}}});var alias=Ext.getCmp('modx-resource-alias');if(alias){var hiddenCmp=new Ext.form.TextField({fieldLabel:_('resource_alias')+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*alias]]</b><br />'+_('resource_alias_help'),name:'alias_lingua['+lang['lang_code']+']',id:'modx-resource-alias-'+lang['lang_code'],cls:'lingua-hidden-fields',hidden:true,maxLength:100,anchor:'100%',value:(record&&record.alias?record.alias:'')});Ext.getCmp(alias.ownerCt.id).insert(alias.ownerCt.items.indexOf(alias)+1,hiddenCmp);}
var menutitle=Ext.getCmp('modx-resource-menutitle');if(menutitle){var hiddenCmp=new Ext.form.TextField({fieldLabel:_('resource_menutitle')+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*menutitle]]</b><br />'+_('resource_menutitle_help'),name:'menutitle_lingua['+lang['lang_code']+']',id:'modx-resource-menutitle-'+lang['lang_code'],cls:'lingua-hidden-fields',hidden:true,maxLength:255,anchor:'100%',value:(record&&record.menutitle?record.menutitle:'')});Ext.getCmp(menutitle.ownerCt.id).insert(menutitle.ownerCt.items.indexOf(menutitle)+1,hiddenCmp);}
var linkAttributes=Ext.getCmp('modx-resource-link-attributes');if(linkAttributes){var hiddenCmp=new Ext.form.TextField({fieldLabel:_('resource_link_attributes')+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*link_attributes]]</b><br />'+_('resource_link_attributes_help'),name:'link_attributes_lingua['+lang['lang_code']+']',id:'modx-resource-link-attributes-'+lang['lang_code'],cls:'lingua-hidden-fields',hidden:true,maxLength:255,anchor:'100%',value:(record&&record.link_attributes?record.link_attributes:'')});Ext.getCmp(linkAttributes.ownerCt.id).insert(linkAttributes.ownerCt.items.indexOf(linkAttributes)+1,hiddenCmp);}
var uriOverride=Ext.getCmp('modx-resource-uri-override');if(uriOverride){var hiddenCmp=new Ext.form.XCheckbox({boxLabel:_('resource_uri_override')+'&nbsp;<img src="../'+flag+'">',description:_('resource_uri_override_help'),hideLabel:true,name:'uri_override_lingua['+lang['lang_code']+']',value:1,checked:(record&&record.uri_override?(parseInt(record.uri_override)?true:false):false),id:'modx-resource-uri-override-'+lang['lang_code'],cls:'lingua-hidden-fields',hidden:true});if(hiddenCmp){hiddenCmp.on('check',function(cb){var uri=Ext.getCmp('modx-resource-uri-'+lang['lang_code']);if(cb.checked){uri.show();}else{uri.hide();}});}
Ext.getCmp(uriOverride.ownerCt.id).insert(uriOverride.ownerCt.items.indexOf(uriOverride)+1,hiddenCmp);}
var uri=Ext.getCmp('modx-resource-uri');if(uri){var hiddenCmp=new Ext.form.TextField({fieldLabel:_('resource_uri')+'&nbsp;<img src="../'+flag+'">',description:'<b>[[*uri]]</b><br />'+_('resource_uri_help'),name:'uri_lingua['+lang['lang_code']+']',id:'modx-resource-uri-'+lang['lang_code'],cls:'lingua-hidden-fields',hidden:true,maxLength:255,anchor:'70%',value:(record&&record.uri?record.uri:'')});Ext.getCmp(uri.ownerCt.id).insert(uri.ownerCt.items.indexOf(uri)+1,hiddenCmp);}};Lingua.prototype.switchMainFields=function(selectedLang){var title;if(selectedLang!==this.config.defaultLang){title=Ext.util.Format.stripTags(Ext.getCmp('modx-resource-pagetitle-'+selectedLang).getValue());}else{title=Ext.util.Format.stripTags(Ext.getCmp('modx-resource-pagetitle').getValue());}
if(!title){title='&nbsp;';}
Ext.getCmp('modx-resource-header').getEl().update('<h2>'+title+'</h2>');var pagetitle=Ext.getCmp('modx-resource-pagetitle');if(pagetitle){if(selectedLang!==this.config.defaultLang){pagetitle.hide();Ext.getCmp('modx-resource-pagetitle-'+selectedLang).show();}else{pagetitle.show();}}
var longtitle=Ext.getCmp('modx-resource-longtitle');if(longtitle){if(selectedLang!==this.config.defaultLang){longtitle.hide();Ext.getCmp('modx-resource-longtitle-'+selectedLang).show();}else{longtitle.show();}}
var description=Ext.getCmp('modx-resource-description');if(description){if(selectedLang!==this.config.defaultLang){description.hide();Ext.getCmp('modx-resource-description-'+selectedLang).show();}else{description.show();}}
var introtext=Ext.getCmp('modx-resource-introtext');if(introtext){if(selectedLang!==this.config.defaultLang){introtext.hide();Ext.getCmp('modx-resource-introtext-'+selectedLang).show();}else{introtext.show();}}
var content=Ext.getCmp('modx-resource-content');if(content){content.setTitle(_('resource_content')+'&nbsp;<img src="../'+this.config.langs[selectedLang]['flag']+'">');}
var ta=Ext.getCmp('ta');if(ta){if(selectedLang!==this.config.defaultLang){ta.hide();Ext.getCmp('ta-'+selectedLang).show();}else{ta.show();}}
var alias=Ext.getCmp('modx-resource-alias');if(alias){if(selectedLang!==this.config.defaultLang){alias.hide();Ext.getCmp('modx-resource-alias-'+selectedLang).show();}else{alias.show();}}
var menutitle=Ext.getCmp('modx-resource-menutitle');if(menutitle){if(selectedLang!==this.config.defaultLang){menutitle.hide();Ext.getCmp('modx-resource-menutitle-'+selectedLang).show();}else{menutitle.show();}}
var linkAttributes=Ext.getCmp('modx-resource-link-attributes');if(linkAttributes){if(selectedLang!==this.config.defaultLang){linkAttributes.hide();Ext.getCmp('modx-resource-link-attributes-'+selectedLang).show();}else{linkAttributes.show();}}
var uriOverride=Ext.getCmp('modx-resource-uri-override');if(uriOverride){if(selectedLang!==this.config.defaultLang){uriOverride.hide();Ext.getCmp('modx-resource-uri-override-'+selectedLang).show();}else{uriOverride.show();}}
var uri=Ext.getCmp('modx-resource-uri');if(uri){if(selectedLang!==this.config.defaultLang){uri.hide();if(Ext.getCmp('modx-resource-uri-override-'+selectedLang).checked){Ext.getCmp('modx-resource-uri-'+selectedLang).show();}}else{if(typeof(uriOverride)!=='undefined'&&uriOverride.checked){uri.show();}}}};Lingua.prototype.initAllClonedTVFields=function(langs){var _this=this;if(typeof(this.config.tmplvars)==='undefined'){false;}
Ext.each(this.config.tmplvars,function(tv){Ext.each(langs,function(lang){_this.initCloneTVField(lang,tv);});});setTimeout(function(){var els=Ext.query(".lingua-hidden-fields");Ext.each(els,function(item,idx){var cmp,el;if(cmp=Ext.getCmp(item.id)){cmp.getEl().setVisibilityMode(Ext.Element.DISPLAY);cmp.hide();}else if(el=Ext.get(item.id)){el.setVisibilityMode(Ext.Element.DISPLAY);el.hide();}});},1);};Lingua.prototype.initCloneTVField=function(lang,tv){var cloneTVrowId='tv'+tv['id']+'_'+lang['lang_code']+'_lingua_tv-tr';var cloneTVEl=Ext.get(cloneTVrowId);var oriTVrowEl=Ext.get('tv'+tv['id']+'-tr');if(typeof(cloneTVEl)!=='undefined'&&cloneTVEl!==null){cloneTVEl.addClass('lingua-hidden-fields');cloneTVEl.addClass('lingua-tv-fields-'+lang['lang_code']);if(oriTVrowEl.hasClass('tv-first')){cloneTVEl.addClass('tv-first');}else if(oriTVrowEl.hasClass('tv-last')){cloneTVEl.addClass('tv-last');}
cloneTVEl.insertAfter(oriTVrowEl);}
var captionEl=Ext.get('tv'+tv['id']+'_'+lang['lang_code']+'_lingua_tv-caption');if(typeof(captionEl)!=='undefined'&&captionEl!==null){captionEl.dom.innerHTML+=' <img src="../'+lang['flag']+'">';}};Lingua.prototype.switchTVFields=function(selectedLang){var _this=this;if(typeof(this.config.tmplvars)==='undefined'){false;}
Ext.each(this.config.tmplvars,function(tv){_this.toggleFieldByLanguage('tv'+tv['id']+'-tr','tv'+tv['id']+'_'+selectedLang+'_lingua_tv-tr',selectedLang);});};Lingua.prototype.toggleFieldByLanguage=function(sourceId,cloneId,selectedLang){var TVEl=Ext.get(sourceId);if(typeof(TVEl)!=='undefined'&&TVEl!==null){if(selectedLang!==this.config.defaultLang){TVEl.setVisibilityMode(Ext.Element.DISPLAY);TVEl.hide();}else{TVEl.show();}}
var cloneTVEl=Ext.get(cloneId);if(typeof(cloneTVEl)!=='undefined'&&cloneTVEl!==null){cloneTVEl.addClass('lingua-hidden-fields');if(selectedLang!==this.config.defaultLang){cloneTVEl.show();}}};