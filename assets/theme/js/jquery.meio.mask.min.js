(function(e){if(!e.browser){var c=function(g){g=g.toLowerCase();var f=/(chrome)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+)/.exec(g)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(g)||/(msie) ([\w.]+)/.exec(g)||g.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(g)||[];return f[2]||"0"};e.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),android:(navigator.userAgent.toLowerCase().indexOf("mozilla/5.0")>-1&&navigator.userAgent.toLowerCase().indexOf("android ")>-1&&navigator.userAgent.toLowerCase().indexOf("applewebkit")>-1),version:c(navigator.userAgent)}}var a=(window.orientation!=null);var b=((e.browser.opera||(e.browser.mozilla&&parseFloat(e.browser.version.substr(0,3))<1.9))?"input":"paste");var d=function(g){g=e.event.fix(g||window.event);g.type="paste";var f=g.target;setTimeout(function(){e.event.dispatch.call(f,g)},1)};e.event.special.paste={setup:function(){if(this.addEventListener){this.addEventListener(b,d,false)}else{if(this.attachEvent){this.attachEvent("on"+b,d)}}},teardown:function(){if(this.removeEventListener){this.removeEventListener(b,d,false)}else{if(this.detachEvent){this.detachEvent("on"+b,d)}}}};e.extend({mask:{rules:{z:/[a-z]/,Z:/[A-Z]/,a:/[a-zA-Z]/,"*":/[0-9a-zA-Z]/,"@":/[0-9a-zA-ZçÇáàãâéèêíìóòôõúùü]/},keyRepresentation:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"},signals:{"+":"","-":"-"},options:{attr:"alt",mask:null,type:"fixed",maxLength:-1,defaultValue:"",signal:false,textAlign:true,selectCharsOnFocus:true,autoTab:true,setSize:false,fixedChars:"[(),.:/ -]",onInvalid:function(){},onValid:function(){},onOverflow:function(){},onFocus:function(g,f){},onBlur:function(g,f){}},masks:{phone:{mask:"(99) 9999-9999"},"phone-us":{mask:"(999) 999-9999"},cpf:{mask:"999.999.999-99"},cnpj:{mask:"99.999.999/9999-99"},date:{mask:"39/19/9999"},"date-us":{mask:"19/39/9999"},cep:{mask:"99999-999"},time:{mask:"29:59"},cc:{mask:"9999 9999 9999 9999"},integer:{mask:"999.999.999.999",type:"reverse"},decimal:{mask:"99,999.999.999.999",type:"reverse",defaultValue:"000"},"decimal-us":{mask:"99.999,999,999,999",type:"reverse",defaultValue:"000"},"signed-decimal":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"},"signed-decimal-us":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"}},init:function(){if(!this.hasInit){var f=this,g,h=this.keyRepresentation;this.ignore=false;for(g=0;g<=9;g++){this.rules[g]=new RegExp("[0-"+g+"]")}this.keyRep=h;this.ignoreKeys=[];e.each(h,function(i){f.ignoreKeys.push(parseInt(i,10))});this.hasInit=true}},set:function(j,g){var f=this,h=e(j),i="maxLength";g=g||{};this.init();return h.each(function(){if(g.attr){f.options.attr=g.attr}var q=e(this),s=e.extend({},f.options),p=q.attr(s.attr),k="";k=(typeof g=="string")?g:(p!=="")?p:null;if(k){s.mask=k}if(f.masks[k]){s=e.extend(s,f.masks[k])}if(typeof g=="object"&&g.constructor!=Array){s=e.extend(s,g)}if(e.metadata){s=e.extend(s,q.metadata())}if(s.mask!=null){s.mask+="";if(q.data("mask")){f.unset(q)}var l=s.defaultValue,m=(s.type==="reverse"),n=new RegExp(s.fixedChars,"g");if(s.maxLength===-1){s.maxLength=q.attr(i)}s=e.extend({},s,{fixedCharsReg:new RegExp(s.fixedChars),fixedCharsRegG:n,maskArray:s.mask.split(""),maskNonFixedCharsArray:s.mask.replace(n,"").split("")});if((s.type=="fixed"||m)&&s.setSize&&!q.attr("size")){q.attr("size",s.mask.length)}if(m&&s.textAlign){q.css("text-align","right")}if(this.value!==""||l!==""){var r=f.string((this.value!=="")?this.value:l,s);this.defaultValue=r;q.val(r)}if(s.type=="infinite"){s.type="repeat"}q.data("mask",s);q.removeAttr(i);q.bind("keydown.mask",{func:f._onKeyDown,thisObj:f},f._onMask).bind("keypress.mask",{func:f._onKeyPress,thisObj:f},f._onMask).bind("keyup.mask",{func:f._onKeyUp,thisObj:f},f._onMask).bind("paste.mask",{func:f._onPaste,thisObj:f},f._onMask).bind("drop.mask",{func:f._onPaste,thisObj:f},f._onMask).bind("focus.mask",f._onFocus).bind("blur.mask",f._onBlur).bind("change.mask",f._onChange)}})},unset:function(g){var f=e(g);return f.each(function(){var i=e(this);if(i.data("mask")){var h=i.data("mask").maxLength;if(h!=-1){i.attr("maxLength",h)}i.unbind(".mask").removeData("mask")}})},string:function(k,g){this.init();var j={};if(typeof k!="string"){k=String(k)}switch(typeof g){case"string":if(this.masks[g]){j=e.extend(j,this.masks[g])}else{j.mask=g}break;case"object":j=g}if(!j.fixedChars){j.fixedChars=this.options.fixedChars}var f=new RegExp(j.fixedChars),h=new RegExp(j.fixedChars,"g");if((j.type==="reverse")&&j.defaultValue){if(typeof this.signals[j.defaultValue.charAt(0)]!="undefined"){var i=k.charAt(0);j.signal=(typeof this.signals[i]!="undefined")?this.signals[i]:this.signals[j.defaultValue.charAt(0)];j.defaultValue=j.defaultValue.substring(1)}}return this.__maskArray(k.split(""),j.mask.replace(h,"").split(""),j.mask.split(""),j.type,j.maxLength,j.defaultValue,f,j.signal)},_onFocus:function(h){var g=e(this),f=g.data("mask");f.inputFocusValue=g.val();f.changed=false;if(f.selectCharsOnFocus){g.select()}f.onFocus(this,h)},_onBlur:function(h){var g=e(this),f=g.data("mask");if(f.inputFocusValue!=g.val()&&!f.changed){g.trigger("change")}f.onBlur(this,h)},_onChange:function(f){e(this).data("mask").changed=true},_onMask:function(f){var h=f.data.thisObj,g={};g._this=f.target;g.$this=e(g._this);g.data=g.$this.data("mask");if(g.$this.attr("readonly")||!g.data){return true}g[g.data.type]=true;g.value=g.$this.val();g.nKey=h.__getKeyNumber(f);g.range=h.__getRange(g._this);g.valueArray=g.value.split("");return f.data.func.call(h,f,g)},_onKeyDown:function(g,h){this.ignore=e.inArray(h.nKey,this.ignoreKeys)>-1||((g.ctrlKey||g.metaKey||g.altKey)&&g.key);if(this.ignore){var f=this.keyRep[h.nKey];h.data.onValid.call(h._this,f||"",h.nKey)}return a?this._onKeyPress(g,h):true},_onKeyUp:function(f,g){if(g.nKey===9||g.nKey===16){return true}if(g.repeat){this.__autoTab(g);return true}return this._onPaste(f,g)},_onPaste:function(g,h){if(h.reverse){this.__changeSignal(g.type,h)}var f=this.__maskArray(h.valueArray,h.data.maskNonFixedCharsArray,h.data.maskArray,h.data.type,h.data.maxLength,h.data.defaultValue,h.data.fixedCharsReg,h.data.signal);h.$this.val(f);if(!h.reverse&&h.data.defaultValue.length&&(h.range.start===h.range.end)){this.__setRange(h._this,h.range.start,h.range.end)}if((e.browser.msie||e.browser.safari)&&!h.reverse){this.__setRange(h._this,h.range.start,h.range.end)}if(this.ignore){return true}this.__autoTab(h);return true},_onKeyPress:function(m,f){if(this.ignore){return true}if(f.reverse){this.__changeSignal(m.type,f)}var n=String.fromCharCode(f.nKey),q=f.range.start,j=f.value,h=f.data.maskArray;if(f.reverse){var i=j.substr(0,q),l=j.substr(f.range.end,j.length);j=i+n+l;if(f.data.signal&&(q-f.data.signal.length>0)){q-=f.data.signal.length}}var p=j.replace(f.data.fixedCharsRegG,"").split(""),g=this.__extraPositionsTill(q,h,f.data.fixedCharsReg);f.rsEp=q+g;if(f.repeat){f.rsEp=0}if(!this.rules[h[f.rsEp]]||(f.data.maxLength!=-1&&p.length>=f.data.maxLength&&f.repeat)){f.data.onOverflow.call(f._this,n,f.nKey);return false}else{if(!this.rules[h[f.rsEp]].test(n)){f.data.onInvalid.call(f._this,n,f.nKey);return false}else{f.data.onValid.call(f._this,n,f.nKey)}}var k=this.__maskArray(p,f.data.maskNonFixedCharsArray,h,f.data.type,f.data.maxLength,f.data.defaultValue,f.data.fixedCharsReg,f.data.signal,g);if(!f.repeat){f.$this.val(k)}return(f.reverse)?this._keyPressReverse(m,f):(f.fixed)?this._keyPressFixed(m,f):true},_keyPressFixed:function(f,g){if(g.range.start==g.range.end){if((g.rsEp===0&&g.value.length===0)||g.rsEp<g.value.length){this.__setRange(g._this,g.rsEp,g.rsEp+1)}}else{this.__setRange(g._this,g.range.start,g.range.end)}return true},_keyPressReverse:function(f,g){if(e.browser.msie&&((g.range.start===0&&g.range.end===0)||g.range.start!=g.range.end)){this.__setRange(g._this,g.value.length)}return false},__autoTab:function(g){if(g.data.autoTab&&((g.$this.val().length>=g.data.maskArray.length&&!g.repeat)||(g.data.maxLength!=-1&&g.valueArray.length>=g.data.maxLength&&g.repeat))){var f=this.__getNextInput(g._this,g.data.autoTab);if(f){g.$this.trigger("blur");f.focus().select()}}},__changeSignal:function(g,h){if(h.data.signal!==false){var f=(g==="paste")?h.value.charAt(0):String.fromCharCode(h.nKey);if(this.signals&&(typeof this.signals[f]!=="undefined")){h.data.signal=this.signals[f]}}},__getKeyNumber:function(f){return(f.charCode||f.keyCode||f.which)},__maskArray:function(n,i,h,k,f,l,o,m,g){if(k==="reverse"){n.reverse()}n=this.__removeInvalidChars(n,i,k==="repeat"||k==="infinite");if(l){n=this.__applyDefaultValue.call(n,l)}n=this.__applyMask(n,h,g,o);switch(k){case"reverse":n.reverse();return(m||"")+n.join("").substring(n.length-h.length);case"infinite":case"repeat":var j=n.join("");return(f!==-1&&n.length>=f)?j.substring(0,f):j;default:return n.join("").substring(0,h.length)}return""},__applyDefaultValue:function(h){var f=h.length,g=this.length,j;for(j=g-1;j>=0;j--){if(this[j]==h.charAt(0)){this.pop()}else{break}}for(j=0;j<f;j++){if(!this[j]){this[j]=h.charAt(j)}}return this},__removeInvalidChars:function(j,h,f){for(var g=0,k=0;g<j.length;g++){if(h[k]&&this.rules[h[k]]&&!this.rules[h[k]].test(j[g])){j.splice(g,1);if(!f){k--}g--}if(!f){k++}}return j},__applyMask:function(j,g,k,f){if(typeof k=="undefined"){k=0}for(var h=0;h<j.length+k;h++){if(g[h]&&f.test(g[h])){j.splice(h,0,g[h])}}return j},__extraPositionsTill:function(i,g,f){var h=0;while(f.test(g[i++])){h++}return h},__getNextInput:function(s,h){var g=s.form;if(g==null){return null}var l=g.elements,k=e.inArray(s,l)+1,n=l.length,q=null,m;for(m=k;m<n;m++){q=e(l[m]);if(this.__isNextInput(q,h)){return q}}var f=document.forms,j=e.inArray(s.form,f)+1,p,o,r=f.length;for(p=j;p<r;p++){o=f[p].elements;n=o.length;for(m=0;m<n;m++){q=e(o[m]);if(this.__isNextInput(q,h)){return q}}}return null},__isNextInput:function(h,f){var g=h.get(0);return g&&(g.offsetWidth>0||g.offsetHeight>0)&&g.nodeName!="FIELDSET"&&(f===true||(typeof f=="string"&&h.is(f)))},__setRange:function(h,i,f){if(typeof f=="undefined"){f=i}if(h.setSelectionRange){h.setSelectionRange(i,f)}else{var g=h.createTextRange();g.collapse();g.moveStart("character",i);g.moveEnd("character",f-i);g.select()}},__getRange:function(g){if(!e.browser.msie&&!e.browser.android){return{start:g.selectionStart,end:g.selectionEnd}}var h={start:0,end:0},f=document.selection.createRange();h.start=0-f.duplicate().moveStart("character",-100000);h.end=h.start+f.text.length;return h},unmaskedVal:function(f){return e(f).val().replace(e.mask.fixedCharsRegG,"")}}});e.fn.extend({setMask:function(f){return e.mask.set(this,f)},unsetMask:function(){return e.mask.unset(this)},unmaskedVal:function(){return e.mask.unmaskedVal(this[0])}})})(jQuery);